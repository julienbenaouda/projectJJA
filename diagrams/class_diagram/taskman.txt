@startuml

title TASKMAN\n

  package taskman {
    class Clock {
        - systemTime : LocalDateTime
        + LocalDateTime getSystemTime()
        + void updateSystemTime(LocalDateTime timestamp)
    }
  }
  

  package taskman {
    class Controller {
        + Controller()
        + Controller(String initialTime, String UserType)
        + Controller(String initialTime)
        - Controller(HashMap<String, Project> projects, Clock clock)
        + List<String> getProjectNames()
        + boolean projectExists(String projectName)
        - Project getProject(String projectName)
        - void addProject(String name, Project project)
        + HashMap<String, String> getProjectCreationForm()
        + void addProject(HashMap<String, String> form)
        + HashMap<String, String> getProjectDetails(String projectName)
        + list<Integer> getTasksOfProject(String projectName)
        + HashMap<String, String> getTaskDetails(String projectName, Integer taskID)
        + ArrayList<HashMap<String, String>> getAvailableTaskDetails(String projectName)
        + HashMap<String, String> getTaskCreationForm()
        + void addTask(String projectName, HashMap<String, String> form)
        + Integer getLastTaskID()
        + void addAlternativeToTask(String projectName, Integer taskID, Integer alternativeTaskID)
        + void addDependencyToTask(String projectName, Integer taskID, Integer alternativeTaskID)
        + HashMap<String, String> getUpdateTaskStatusForm()
        + void updateTaskStatus(String projectName, Integer taskID, HashMap<String, String> form)
        + String getDelay(String projectName, Integer taskID)
        + String getSystemTime()
        + void updateSystemTime(String timestamp)
        + String getUserType()
        + void setUserType(String userType)
        + void exportToXML(String path)
        {static} + void importFromXML(String path)
    }
  }
  

  package taskman {
    class Project {
        - name : String
        - description : String
        - creationTime : LocalDateTime
        - dueTime : LocalDateTime
        - taskList : ArrayList<Task>
        + Project(String name, String description, LocalDateTime startTime, LocalDateTime dueTime)
        - void addTask(Task t)
        + createTask(String description, long estimatedDuration, double acceptableDeviation)
        + boolean isFinished()
        + void removeTask(Task task)
        + String getName()
        - void setName(String name)
        + String getDescription()
        - void setDescription(String description)
        + LocalDateTime getCreationTime()
        - void setCreationTime(LocalDateTime creationTime)
        + LocalDateTime getDueTime()
        - void setDueTime(LocalDateTime dueTime)
        + List<Task> getTasks()
        + Task getTask(int index)
    }
  }
  

  package taskman {
    enum TaskStatus {
      AVAILABLE
      UNAVAILABLE
      FINISHED
      FAILED

     + boolean isFinal()
    }
  }
  

  package taskman {
    class Task {
        - description : String
        - estimatedDuration : Duration
        - acceptableDeviation : Double
        - dependencies : ArrayList<Task>
        - TimeSpan timesSpan
        - TaskStatus status
        + Task(String description, String estimatedDuration, String acceptableDeviation)
        + Task(String description, String estimatedDuration, String acceptableDeviation, TimeSpan timeSpan)
        + getStatus()
        - setStatus(TaskStatus status)
        + String getDescription()
        - void setDescription(String description)
        + String getEstimatedDuration()
        - void setEstimatedDuration(String duration)
        + String getAcceptableDeviation()
        - void setAcceptableDeviation(String acceptableDeviation)
        - void setTimeSpan(TimeSpan timeSpan)
        + timeSpan getTimeSpan()
        + void updateStatus(TimeSpan timespan)
        + String getDelay()
        + Task getAlternative()
        + void setAlternative(Task t)
        + ArrayList<Task> getDependencies()
        - void setDependencies(ArayList<Task> tasks)
        + void addDependency(Task t)
        + void removeDependency(Task task)
        + isFinished()
        {static} - boolean containsLoop(Task task, Task other)
    }
  }


  package taskman {
    class TimeSpan {
        - startTime: LocalDateTime
        - endTime: LocalDateTime
        + TimeSpan(LocalDateTime startTime, LocalDateTime endtime)
        + LocalDateTime getStartTime()
        + LocalDateTime getEndTime()
        - void setStartTime(LocalDateTime startTime)
        - void setEndTime(LocalDateTime endTime)
    }
  }  

  package taskman {
     class ResourceType {
     }
  }

  package taskman {
     class UserManager {
        - users: list<User>
        - currentUser: User
        + createDeveloper(String name, String password)
        + creatProjectManager(String name, String password)
     }
  }

  package taskman {
     abstract class User {
        - name: String
        - password: String
        + String getName()
        + String getPassword()
        + User(name, password)
        - void setName()
        - void setPassword()
     }
  }

  package taskman {
     class ProjectManager {
        + ProjectManager(name, password)
     }
  }

  package taskman {
     class Developer {
        Developer(name, password)
     }
  }

  package taskman {
    class UserInterface {
        # UI()
        + void welcomeDialog()
        + void showUserChoiceDialog()
        + void showMainMenu()
        + void showSystemTime()
        + void listProjects()
        + void importFile()
        + void exportFile()
        + void showProjectMenu()
        + void showProjectMenu(String projectName)
        + void addAlternative(String projectName)
        + void addDependency(String projectName)
        + void showProjectDetails(String projectName)
        + void showTaskDetails(String projectName)
        + void createTask(String projectName)
        + void showAvailableTasks(String prjectName)
        - void fillInTaskUpdateForm()
        + void updateTaskStatus(String projectName)
        + void createProject()
        + void advanceSystemTime()
        + void print(String text)
        - int inputInt()
        # String inputString()
        + Controller getController()
        {static} + void main()
    }
  }
  

  package taskman {
    class XmlException {
        + XmlException(String message)
    }
  }  
   
  package taskman {
    class XmlObject {
        - doc : Document
        - element : Element
        + XmlObject()
        - XmlObject(Document doc, Element e)
        + void exportTo(String path)
        {static} + XmlObject importFrom(String path)
        + XmlObject addXmlObject(String name)
        + List<XmlObject> getXmlObjects(String name)
        + void addAttribute(String name, String content)
        + String getAttribute(String name)
        + void addText(String element, String text)
        + List<String> getTexts(String name)
    }
  }
  

  Controller *-- Clock 
  Controller *-- Project
  Controller o-- Task
  Controller o-- XmlObject
  Controller o-- User
  Project *-- Task: task
  Task *-- Task : alternative
  Task *-- Task: dependencies
  Task *-- TimeSpan: timespans
  TimeSpan *-- TaskStatus : status
  UI *-- Controller : controller
  User *-- UserType: usertype
  XmlObject o-- Project
  XmlObject o-- Task
  XmlObject o-- User
  XmlObject o-- Clock
  XmlObject o-- XmlException
  UI o-- XmlException
  controller o-- UserManager
  UserManager o-- User
  UserManager o-- Developer
  UserManager o-- ProjectManager
  Developer <|-- User
  ProjectManager <|-- User
  Task o-- User
  Project o-- User
  Controller o-- User


@enduml
